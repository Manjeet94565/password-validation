<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Password Validator</title>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      background: linear-gradient(135deg, #0f0c29, #302b63, #24243e);
      font-family: 'Segoe UI', sans-serif;
      color: #eee;
    }
    .card {
      background: rgba(255,255,255,0.05);
      backdrop-filter: blur(12px);
      border: 1px solid rgba(255,255,255,0.12);
      border-radius: 20px;
      padding: 40px;
      width: 480px;
      box-shadow: 0 25px 60px rgba(0,0,0,0.5);
    }
    h1 { font-size: 1.7rem; margin-bottom: 6px; }
    .subtitle { font-size: 0.85rem; color: #aaa; margin-bottom: 28px; }

    .input-wrap { position: relative; margin-bottom: 18px; }
    input[type=password], input[type=text] {
      width: 100%;
      padding: 14px 48px 14px 16px;
      border-radius: 12px;
      border: 1.5px solid rgba(255,255,255,0.15);
      background: rgba(255,255,255,0.08);
      color: #fff;
      font-size: 1rem;
      outline: none;
      transition: border .2s;
    }
    input:focus { border-color: #7c6be0; }
    .toggle-eye {
      position: absolute; right: 14px; top: 50%;
      transform: translateY(-50%);
      cursor: pointer; font-size: 1.2rem; user-select: none;
    }

    /* Strength bar */
    .bar-track {
      height: 8px; border-radius: 99px;
      background: rgba(255,255,255,0.1);
      overflow: hidden; margin-bottom: 10px;
    }
    .bar-fill {
      height: 100%; border-radius: 99px;
      transition: width .4s, background .4s;
    }
    .strength-row { display: flex; justify-content: space-between; font-size: 0.82rem; color: #bbb; margin-bottom: 18px; }

    /* Results */
    .result-box { background: rgba(255,255,255,0.05); border-radius: 12px; padding: 16px; min-height: 60px; }
    .tag { display: inline-block; padding: 4px 10px; border-radius: 20px; font-size: 0.78rem; margin: 3px 3px 3px 0; }
    .error   { background: rgba(255, 80, 80, 0.15);  border: 1px solid #ff5050; color: #ff8080; }
    .warning { background: rgba(255,200, 50, 0.12);  border: 1px solid #ffc832; color: #ffd566; }
    .success { background: rgba( 60,220,120, 0.12);  border: 1px solid #3cdc78; color: #6eeaa0; font-size: 0.9rem; padding: 10px 14px; }

    .meta { font-size: 0.78rem; color: #888; margin-top: 12px; }

    button {
      width: 100%; margin-top: 18px;
      padding: 14px; border-radius: 12px; border: none;
      background: linear-gradient(135deg, #7c6be0, #a855f7);
      color: #fff; font-size: 1rem; font-weight: 600;
      cursor: pointer; transition: opacity .2s;
    }
    button:hover { opacity: .85; }
  </style>
</head>
<body>
<div class="card">
  <h1>üîê Password Validator</h1>
  <p class="subtitle">Strong password enforcer with entropy analysis</p>

  <div class="input-wrap">
    <input type="password" id="pwd" placeholder="Enter your password‚Ä¶" oninput="liveCheck()" autocomplete="off">
    <span class="toggle-eye" onclick="toggleEye()">üëÅ</span>
  </div>

  <div class="bar-track"><div class="bar-fill" id="bar" style="width:0%;background:#ff5050"></div></div>
  <div class="strength-row">
    <span id="strengthLabel">‚Äî</span>
    <span id="scoreLabel">Score: 0/100 ¬∑ Entropy: 0 bits</span>
  </div>

  <div class="result-box" id="results">
    <span style="color:#666;font-size:.85rem">Start typing to validate‚Ä¶</span>
  </div>

  <button onclick="fullValidate()">Validate Password</button>
</div>

<script>
const colors = ["#ff5050","#ff8c42","#ffc832","#3cdc78","#00d4ff"];

async function callAPI(pwd) {
  const r = await fetch("/validate", {
    method: "POST",
    headers: {"Content-Type":"application/json"},
    body: JSON.stringify({password: pwd})
  });
  return r.json();
}

function renderResults(data) {
  const pct = data.score;
  const bar = document.getElementById("bar");
  bar.style.width = pct + "%";
  bar.style.background = pct < 30 ? colors[0] : pct < 50 ? colors[1] : pct < 70 ? colors[2] : pct < 90 ? colors[3] : colors[4];

  document.getElementById("strengthLabel").textContent = data.strength;
  document.getElementById("scoreLabel").textContent = `Score: ${data.score}/100 ¬∑ Entropy: ${data.entropy} bits`;

  let html = "";
  if (data.valid) {
    html += `<div class="tag success">‚úÖ Password is valid! ${data.strength}</div>`;
  }
  data.errors.forEach(e   => { html += `<div class="tag error">‚ùå ${e}</div>`; });
  data.warnings.forEach(w => { html += `<div class="tag warning">‚ö†Ô∏è ${w}</div>`; });
  if (!html) html = `<span style="color:#888;font-size:.85rem">Checking‚Ä¶</span>`;
  document.getElementById("results").innerHTML = html;
}

async function liveCheck() {
  const pwd = document.getElementById("pwd").value;
  if (!pwd) {
    document.getElementById("results").innerHTML = `<span style="color:#666;font-size:.85rem">Start typing to validate‚Ä¶</span>`;
    document.getElementById("bar").style.width = "0%";
    document.getElementById("strengthLabel").textContent = "‚Äî";
    document.getElementById("scoreLabel").textContent = "Score: 0/100 ¬∑ Entropy: 0 bits";
    return;
  }
  const data = await callAPI(pwd);
  renderResults(data);
}

async function fullValidate() {
  const pwd = document.getElementById("pwd").value;
  if (!pwd) { alert("Please enter a password first."); return; }
  const data = await callAPI(pwd);
  renderResults(data);
  
}

function toggleEye() {
  const el = document.getElementById("pwd");
  el.type = el.type === "password" ? "text" : "password";
}
</script>
</body>
</html>
